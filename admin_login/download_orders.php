<?php include '../config.php'; 
if (isset($_GET['query'])) { $query = urldecode($_GET['query']); $result = mysqli_query($con, $query); 
header('Content-Type: text/csv; charset=utf-8'); 
header('Content-Disposition: attachment; filename="orders.csv"'); 
$output = fopen('php://output', 'w'); 
// Update the column headers to match your actual database structure 
fputcsv($output, [ 'ID', 'Order ID', 'First Name', 'Mobile', 'Street', 'Landmark', 'City', 'Taluka', 'District', 'Pincode', 'Language', 'Quantity', 'Mode of Payment', 'Books Value', 'Charges Value', 'Total Amount', 'Order Date (DD-MM-YYYY)', 'Order Time', 'Payment Status', 'Razorpay ID', 'Bank Reference No', 'Ship Order ID', 'Ship Channel Order ID', 'Shipment ID', 'Ship Status', 'Ship Status Code', 'Ship Onboarding', 'AWB Code', 'Courier ID', 'Courier Name', 'Ship Channel', 'Affiliate ID', 'Shiprocket Account', 'Last Updated', 'Meta Info' ]); while ($row = mysqli_fetch_assoc($result)) { $row['order_date'] = date('d-m-Y', strtotime($row['order_date'])); fputcsv($output, [ $row['id'], $row['order_id'], $row['fname'], $row['mobno'], $row['street'], $row['landmark'], $row['city'], $row['taluka'], $row['district'], $row['pincode'], $row['language'], $row['qty'], $row['mode_of_payment'], $row['value_books'], $row['value_charges'], $row['total_amount'], $row['order_date'], $row['order_time'], $row['payment_status'], $row['razorpay_id'], $row['bank_ref_no'], $row['ship_odr_id'], $row['ship_ch_odr_id'], $row['ship_shipment_id'], $row['ship_status'], $row['ship_status_code'], $row['ship_onboarding'], $row['ship_awb_code'], $row['ship_courier_id'], $row['ship_courier_name'], $row['ship_new_channel'], $row['affilate_id'], $row['shiprocket_account'], $row['ship_last_updated'], $row['meta'] ]); } fclose($output); exit(); } ?>